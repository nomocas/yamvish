!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.y=t()}}(function(){return function t(e,n,i){function r(o,u){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!u&&l)return l(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var a=n[o]={exports:{}};e[o][0].call(a.exports,function(t){var n=e[o][1][t];return r(n?n:t)},a,a.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){var i=function(t){return new i.Template(t)};i.env=t("./lib/env"),i.utils=t("./lib/utils"),i.Context=t("./lib/context"),i.Template=t("./lib/template"),i.PureNode=t("./lib/pure-node"),i.Virtual=t("./lib/virtual"),i.Container=t("./lib/container"),i.View=t("./lib/view");var r=t("./lib/interpolable");i.interpolable=r.interpolable,i.Interpolable=r.Interpolable,e.exports=i},{"./lib/container":3,"./lib/context":4,"./lib/env":6,"./lib/interpolable":8,"./lib/pure-node":11,"./lib/template":12,"./lib/utils":13,"./lib/view":14,"./lib/virtual":15}],2:[function(t,e,n){function i(t){t._asyncCount--,t._asyncCount<=0&&r(t)}function r(t){for(var e=t._errors.length?t._fails:t._successes,n=t._errors.length?t._errors:!0,i=0;i<t._callbacks.length;i++)t._callbacks[i](n);for(var r=0;r<e.length;r++)e[r](n);t._successes=[],t._fails=[],t._errors=[]}var s=function(){this._asyncCount=0,this._errors=[],this._successes=[],this._fails=[],this._callbacks=[],this._ids=(new Date).valueOf()};s.prototype={waiting:function(t){this._asyncCount++;var e=this;return this.parent&&this.parent.waiting&&this.parent.waiting(t),t.then(function(t){return i(e),t},function(t){throw console.log("async waiting error : ",t),e._errors.push(t),i(e),t})},delay:function(t,e){var n=this;return this._asyncCount++,this.parent&&this.parent.delay&&this.parent.delay(function(){},e),setTimeout(function(){t(),i(n)},e)},onDone:function(t){return this._callbacks.push(t),this},then:function(t,e){var n=this;return 0===this._asyncCount?Promise.resolve(!0):new Promise(function(t,e){n._successes.push(t),n._fails.push(e)}).then(t,e)}},e.exports=s},{}],3:[function(t,e,n){function i(t){t=t||{},this.__yContainer__=!0,this.parent=t.parent,this.childNodes=[],this._promises=[],s.call(this,t)}var r=t("./utils"),s=t("./pure-node"),o=t("./emitter");i.prototype={mount:function(t,e,n){if(this.destroyed)throw new Error("yamvish container has been destroyed. could not mount anymore.");if(t&&(t===this.mountPoint||t===this.mountSelector))return this;if(!this.childNodes)return this;var i=t;if("string"==typeof i&&(this.mountSelector=t,i=(n||r.domQuery)(t)),!i)throw new Error("yamvish : mount point not found : "+t);return this.mountPoint=i,e||r.emptyNode(i),r.mountChildren(this,i),(i._yamvish_containers=i._yamvish_containers||[]).push(this),this.dispatchEvent("mounted",this)},appendTo:function(t,e){return this.mount(t,"append",e)},unmount:function(){if(!this.mountPoint)return this;for(var t=0;t<this.childNodes.length;t++)this.mountPoint.removeChild(this.childNodes[t]);return this.mountPoint=null,this.mountSelector=null,this.dispatchEvent("unmounted",this)},destroy:function(){if(this.destroyed)return this;if(this.dispatchEvent("destroy",this),this.destroyed=!0,this.childNodes)for(var t=0;t<this.childNodes.length;t++)r.destroyElement(this.childNodes[t],!0);this.childNodes=null,this.context=null,this.mountPoint=null,this.mountSelector=null},hide:function(){this.childNodes.forEach(function(t){t.style.display="none"})},show:function(){this.childNodes.forEach(function(t){t.style.display=""})},then:function(t,e){return this.promise?this.promise.then(t,e):Promise.resolve(this).then(t)}},r.mergeProto(s.prototype,i.prototype),r.mergeProto(o.prototype,i.prototype),i.prototype.appendChild=function(t){return s.prototype.appendChild.call(this,t),this.mountPoint&&this.mountPoint.appendChild(t),t},i.prototype.removeChild=function(t){return this.childNodes?(s.prototype.removeChild.call(this,t),this.mountPoint&&this.mountPoint.removeChild(t),t):!1},e.exports=i},{"./emitter":5,"./pure-node":11,"./utils":13}],4:[function(t,e,n){function i(t){t=t||{},this.data=void 0!==t.data?t.data:{},this.parent=t.parent,this.map={},this.path=t.path;var e=this;this._binds=[],t.path&&this.parent&&this._binds.push(this.parent.subscribe(t.path,function(t,n,i){e.reset(i)})),o.call(this,t)}function r(t,e,n,i,r){for(var s=0,o=t._upstreams.length;o>s;++s){var u=t._upstreams[s](e,n,i,r);u&&u.then&&this.waiting(u)}}var s=t("./utils"),o=t("./async");i.prototype={destroy:function(){this._binds&&this._binds.forEach(function(t){t()}),this._binds=null,this.parent=null,this.data=null,this.map=null},dependent:function(t,e,n){for(var i,r=[],s=this,o=0,u=e.length;u>o;++o)(this.binds=this.binds||[]).push(this.subscribe(e[o],function(r,o,u,l){i||(i=s.delay(function(){if(i){i=null;for(var r=[],o=0,h=e.length;h>o;++o){var a=e[o];r.push(l===a?u:s.get(a))}s.set(t,n.apply(s,r))}},0))})),r.push(this.get(e[o]));return this.set(t,n.apply(this,r)),this},reset:function(t){return this.data=t||{},this.notifyAll("reset",null,this.map,t,"*"),this},toggle:function(t){return this.set(t,!this.get(t)),this},set:function(t,e){if(t.forEach||(t=t.split(".")),"$this"===t[0])return this.reset(e);if("$parent"===t[0]){if(this.parent)return this.parent.set(t.slice(1),e);throw new Error("yamvish.Context : there is no parent in current context. could not find : "+t.join("."))}var n=s.setProp(this.data,t,e);return n!==e&&this.notify("set",t,e,t[t.length-1]),this},push:function(t,e){if(t.forEach||(t=t.split(".")),"$parent"==t[0]){if(this.parent)return this.parent.push(t.slice(1),e);throw new Error("yamvish.Context : there is no parent in current context. could not find : "+t.join("."))}var n;if(n="$this"===t[0]?this.data:s.getProp(this.data,t),!n)throw new Error("yamvish.Context : Missing array at "+t.join(".")+" : couldn't push object.");if(!n.forEach)throw new Error("yamvish.Context : Object is not array at "+t.join(".")+" : couldn't push object.");return n.push(e),this.notify("push",t,e,n.length-1),this},del:function(t){if(t=t.forEach?t.slice():t.split("."),"$parent"==t[0]){if(this.parent)return this.parent.del(t.slice(1));throw new Error("yamvish.Context : there is no parent in current context. could not find : "+t.join("."))}var e=t.pop(),n=t.length?s.getProp(this.data,t):this.data;if(n)if(n.forEach){var i=parseInt(e,10);n.splice(i,1),this.notify("removeAt",t,null,i)}else delete n[e],this.notify("delete",t,null,e);return this},get:function(t){if(t.forEach||(t=t.split(".")),"$this"===t[0]&&1===t.length)return this.data;if("$parent"==t[0]){if(!this.parent)throw new Error("yamvish.Context : there is no parent in current context. could not find : "+t.join("."));return this.parent.get(t.slice(1))}return s.getProp(this.data,t)},subscribe:function(t,e,n){t.forEach||(t=t.split("."));var i;if("$this"===t[0])i=this.map;else{if("$parent"===t[0]){if(this.parent)return this.parent.subscribe(t.slice(1),e,n);throw new Error("yamvish.Context : there is no parent in current context. could not find : "+t.join("."))}i=s.getProp(this.map,t)}n?i?(i._upstreams=i._upstreams||[]).push(e):s.setProp(this.map,t,{_upstreams:[e]}):i?(i._listeners=i._listeners||[]).push(e):s.setProp(this.map,t,{_listeners:[e]});var r=this;return function(){r.unsubscribe(t,e,n)}},unsubscribe:function(t,e,n){t.forEach||(t=t.split("."));var i;if("$this"===t[0])i=this.map;else{if("$parent"===t[0]){if(this.parent)return this.parent.unsubscribe(t.slice(1),e,n),this;throw new Error("yamvish.Context : there is no parent in current context. could not find : "+t.join("."))}i=s.getProp(this.map,t)}if(!i)return this;for(var r=n?i._upstreams:i._listeners,o=0,u=r.length;u>o;++o)if(r[o]===e){r.splice(o,1);break}return this},notifyAll:function(t,e,n,i,r){if(n=n||this.map,i=arguments.length<2?this.data:i,n._listeners)for(var s=0,o=n._listeners.length;o>s;++s){var u=n._listeners[s](t,e,i,r);u&&u.then&&this.waiting(u)}if("push"!==t&&"removeAt"!==t)for(var l in n)"_listeners"!==l&&"_upstreams"!==l&&this.notifyAll(t,e,n[l],i?i[l]:void 0,r);return this},notify:function(t,e,n,i){e.forEach||(e=e.split(".")),"$this"===e[0]&&(e=[]);for(var s,o=this.map,u=0,l=e.length;l>u&&(s=o["*"],s&&s._upstreams&&r.call(this,s,t,e,n,i),o=o[e[u]]);++u)o._upstreams&&r.call(this,o,t,e,n,i);return s&&this.notifyAll(t,e,s,n,i),o&&this.notifyAll(t,e,o,n,i),this},setAsync:function(t,e){var n=this;return this.waiting(e.then(function(e){return n.set(t,e),e},function(t){throw console.error("error while Context.setAsync : ",t),t}))}},s.mergeProto(o.prototype,i.prototype),e.exports=i},{"./async":2,"./utils":13}],5:[function(t,e,n){var i=function(){};i.prototype={addEventListener:function(t,e){return this._events=this._events||{},(this._events[t]=this._events[t]||[]).push(e),this},removeEventListener:function(t,e){return this._events&&t in this._events!=!1?(this._events[t].splice(this._events[t].indexOf(e),1),this):this},dispatchEvent:function(t){if(!this._events||t in this._events==!1)return this;for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1));return this}},e.exports=i},{}],6:[function(t,e,n){var i=function(){return Promise.context||i.global};i.global={isServer:"undefined"==typeof window&&"undefined"==typeof document,debug:!1,templates:{},views:{},rootContext:null},e.exports=i},{}],7:[function(t,e,n){function i(t){this._queue=t?t._queue.slice():[]}i.prototype={call:function(t,e){for(var n=0,i=this._queue.length;i>n;++n)e=this._queue[n].call(t,e);return e},lower:function(){return this._queue.push(function(t){return t.toLowerCase()}),this},upper:function(){return this._queue.push(function(t){return t.toUpperCase()}),this},reverse:function(){return this._queue.push(function(t){return t.reverse()}),this},join:function(t){return this._queue.push(function(e){return e.join(t)}),this},json:function(t){return this._queue.push(function(e){return JSON.stringify.apply(JSON,t?[e,null," "]:[e])}),this}},e.exports=i},{}],8:[function(t,e,n){(function(n){function i(t){return new Function("__context","__global","return "+t+";")}function r(t,e){if(!e)throw new Error("context is undefined");try{return t.call(e.data,e,"undefined"!=typeof window?window:n)}catch(i){return console.error(i,h().debug?i.stack:""),""}}function s(t,e,n){t=t.replace(c,function(t){if("true"==t||"false"==t||"null"==t)return t;switch(t[0]){case"$":return"."===t[1]?"__global"+t.substring(1):(n.push(t),'__context.get("'+t+'")');case'"':case"'":return t;default:return n.push(t),'__context.get("'+t+'")'}});var r=i(t);if(!e)return r;var s=new Function("Filter","return new Filter()."+e)(a);return function(t,e){return s.call(this,r.call(this,t,e))}}function o(t,e,n,i,s){return function(o,u,l){1===t.dependenciesCount?(t.results[i]=r(n,e),s(o,u,t.output(e))):t.willFire||(t.willFire=e.delay(function(){t.willFire&&(t.willFire=null,t.results[i]=r(n,e),s(o,u,t.output(e)))},0))}}function u(t){var e=r(this.parts[1].func,t);return"undefined"!=typeof e||this._strict?e:""}function l(t,e){var n=t.split(f);return 1==n.length?t:new d(n,e)}var h=t("./env"),a=t("./filter"),c=/true|false|null|\$\.(?:[a-zA-Z]\w*(?:\.\w*)*)|\$this(?:\.\w*)*|\$parent(?:\.\w*)+|\$(?:[a-zA-Z]\w*(?:\.\w*)*)|"[^"]*"|'[^']*'|[a-zA-Z_]\w*(?:\.\w*)*/g,p=function(t){this.outputed=!1,this.binds=[],this.results=[],this.willFire=null,this.parts=t.parts,this.dependenciesCount=t.dependenciesCount};p.prototype.output=function(t){for(var e="",n=!0,i=0,s=0,o=this.parts.length;o>s;s++)n?e+=this.parts[s]:(e+=this.outputed?this.results[i]:this.results[i]=r(this.parts[s].func,t),i++),n=!n;return this.outputed||(this.outputed=!0),e};var d=function(t,e){this.__interpolable__=!0,this._strict=e||!1;var n;5===t.length&&""===t[0]&&""===t[2]&&(this.directOutput=u),this.parts=[],this.dependenciesCount=0;for(var i=!1,r=0,o=t.length;o>r;r++)if(i=!i)this.parts.push(t[r]);else{var n=[];this.parts.push({func:s(t[r],t[r+2],n),dep:n}),r+=2,this.dependenciesCount+=n.length}};d.prototype={subscribeTo:function(t,e){for(var n=new p(this),i=0,r=1,s=this.parts.length;s>r;r+=2){var u=o(n,t,this.parts[r].func,i,e),l=this.parts[r].dep;i++;for(var h=0,a=l.length;a>h;h++)n.binds.push(t.subscribe(l[h],u))}return function(){n.willFire=null;for(var t=0;t<n.binds.length;t++)n.binds[t]()}},output:function(t){if(this.directOutput)return this.directOutput(t);for(var e="",n=!0,i=this.parts,s=0,o=i.length;o>s;++s){if(n)e+=i[s];else{var u=r(i[s].func,t);if("undefined"==typeof u){if(this._strict)return;e+=""}e+=u}n=!n}return e}};var f=/\{\{\s*(.+?)((?:(?:\s\|\s)(.+?))?)\s*\}\}/;e.exports={interpolable:l,Interpolable:d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./env":6,"./filter":7}],9:[function(t,e,n){function i(t,e){for(var n=e||new this.Template,i=0,s=t.childNodes.length;s>i;++i)r(t.childNodes[i],n);return n}function r(t,e){var n=e||y();switch(t.nodeType){case 1:var r=new this.Template;if(i(t,r),t.id&&r.id(t.id),t.attributes.length)for(var s=0,o=t.attributes.length;o>s;++s){var u=t.attributes[s];r.attr(u.name,u.value)}for(var l=0;l<t.classList;++l)r.setClass(t.classList[l]);n.tag.apply(n,[t.tagName.toLowerCase(),r]);break;case 3:n.text(t.textContent);break;case 4:console.log("element is CDATA : ",t);break;default:console.warn("y.elementToTemplate : DOM node not managed : type : %s, ",t.nodeType,t)}return n}e.exports={elementChildrenToTemplate:i,elementToTemplate:r}},{}],10:[function(t,e,n){e.exports=/(br|input|img|area|base|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)/},{}],11:[function(t,e,n){function i(){this.__yPureNode__=!0}t("./utils");i.prototype={insertBefore:function(t,e){var n=this.childNodes.indexOf(e);return-1==n?!1:(0==n?this.childNodes.unshift(t):this.childNodes.splice(n,0,t),!0)},appendChild:function(t){return(this.childNodes=this.childNodes||[]).push(t),t.parentNode=this,t},removeChild:function(t){if(!this.childNodes)return!1;for(var e=0,n=this.childNodes.length;n>e;++e)if(this.childNodes[e]===t)return t.parentNode=null,this.childNodes.splice(e,1),t;return!1},toString:function(){if(!this.childNodes)return"";for(var t="",e=0,n=this.childNodes.length;n>e;++e)t+=this.childNodes[e].toString();return t}},e.exports=i},{"./utils":13}],12:[function(t,e,n){!function(){"use strict";function n(){this.attributes="",this.classes="",this.children="",this.style=""}function i(t){t?(this._queue=t._queue.slice(),this._hasEach=t._hasEach):this._queue=[]}function r(t,e,n,i){for(var r,s=e[0],o=0,u=[];s;)o++,s.toElement?(r=s.toElement.call(t,n,i),r&&r.then&&u.push(r),s=e[o]):s=e[o];return u.length?1===Promise.length?u[0]:Promise.all(u):void 0}var s=t("./utils"),o=t("./env"),u=t("./interpolable").interpolable,l=(t("./parsers/dom-to-template"),t("./virtual")),h=t("./pure-node"),a=t("./container"),c=t("./context"),p=function(){return new i},d=function(t,e){if(e=e||t._eachTemplate,!e)throw s.produceError("no template for .each template handler",t);return e};i.prototype={call:function(t,e,n){return r(t,this._queue,e,n||(o().isServer?l:document))},toContainer:function(t,e){var n=new a({factory:e});return n.promise=r(n,this._queue,t,e||(o().isServer?l:document)),n},toString:function(t,e){e=e||new n;for(var i=0,r=this._queue.length;r>i;++i)this._queue[i].toString&&this._queue[i].toString(t,e);return e.children},exec:function(t,e){return this._queue.push({toElement:t,toString:e===!0?t:e}),this},log:function(){var t=arguments;return this.exec(function(e,n){console.log.apply(console,t)},!0)},"if":function(t,e,n){var i=typeof t;return"string"===i&&(t=u(t)),this.exec(function(r,s){var o=t,u=this,l=function(t,i,o){return o?e.call(u,r,s):n?n.call(u,r,s):void 0};return t&&t.__interpolable__?(o=t.output(r),(this._binds=this._binds||[]).push(t.subscribeTo(r,l))):"function"===i&&(o=t.call(this,r)),l("set",o)},function(r,s){var o;return t&&t.__interpolable__?o=t.output(r):"function"===i&&(o=t.call(this,r)),o?e.toString(r,s):n?n.toString(r,s):void 0})},set:function(t,e){return this.exec(function(n){n.set(t,e)},!0)},dependent:function(t,e,n){return this.exec(function(i){i.dependent(t,e,n)},!0)},push:function(t,e){return this.exec(function(n){n.push(t,e)},!0)},del:function(t){return this.exec(function(e){e.del(t)},!0)},context:function(t){var e;return"string"==typeof t&&(e=t),this.exec(function(n){this.context=new c({data:e?null:t,parent:n,path:e?e:null})},!0)},sub:function(t,e,n){return this.exec(function(i){i.subscribe(t,e,n)})},unsub:function(t,e,n){return this.exec(function(i){i.unsubscribe(t,e,n)})},"with":function(t,e){return this.exec(function(n,i){var r=new c({data:"string"==typeof t?n.get(t):t,parent:n,path:t});return e.call(this,r,i)},function(i,r){var s=new c({data:"string"==typeof t?i.get(t):t,parent:i,path:t}),o=new n;e.toString(s,o),r.attributes+=o.attributes,o.style&&(r.style+=o.style),o.classes&&(r.classes+=o.classes),o.children&&(r.children+=o.children)})},attr:function(t,e){return"string"==typeof e&&(e=u(e)),(this._attributes=this._attributes||[]).push({name:t,value:e}),this.exec(function(n){var i=this,r=e;e.__interpolable__&&(r=e.output(n),(this._binds=this._binds||[]).push(e.subscribeTo(n,function(e,n,r){i.setAttribute(t,r)}))),this.setAttribute(t,r)},function(n,i){return i.attributes+=" "+t,e&&(i.attributes+='="'+(e.__interpolable__?e.output(n):e)+'"'),""})},removeAttr:function(t){return this.exec(function(e){this.removeAttribute(t)},function(t,e){})},disabled:function(t){var e=!1;return t&&"!"===t[0]&&(t=t.substring(1),e=!0),this.exec(function(n){var i=this,r=function(t,n,r){e&&(r=!r),r?i.setAttribute("disabled"):i.removeAttribute("disabled")};"string"==typeof t?((this._binds=this._binds||[]).push(n.subscribe(t,r)),r("set",null,n.get(t))):r("set",null,void 0!==t?t:!0)},function(e,n){(void 0===t||e.get(t))&&(n.attributes+=" disabled")})},val:function(t){var e;if("string"==typeof t&&(t=u(t),t.__interpolable__)){if(1!==t.dependenciesCount)throw new Error("template.val expression could only depend to one variable.");e=t.parts[1].dep[0]}return this.exec(function(n){var i=this;t.__interpolable__?(o().isServer||this.addEventListener("input",function(t){n.set(e,t.target.value)}),(this._binds=this._binds||[]).push(t.subscribeTo(n,function(t,e,n){i.setAttribute("value",n)})),this.setAttribute("value",t.output(n))):this.setAttribute("value",t)},function(e,n){n.attributes+=' value="'+(t.__interpolable__?t.output(e):t)+'"'})},contentEditable:function(t){return"string"==typeof t&&(t=u(t)),this.exec(function(e,n){var i,r,s=this;this.setAttribute("contenteditable",!0),t.__interpolable__?(r=e.get(t.directOutput),o().isServer||this.addEventListener("input",function(n){s.freeze=!0,e.set(t.directOutput,n.target.textContent)}),(this._binds=this._binds||[]).push(t.subscribeTo(e,function(t,e,n){s.freeze||(s.nodeValue=n,s.el&&(s.el.nodeValue=n)),s.freeze=!1}))):r=t,i=n.createTextNode(r),this.appendChild(i)},function(t,e){e.attributes+=" contenteditable"})},setClass:function(t,e){var n=!1;return e&&"!"===e[0]&&(e=e.substring(1),n=!0),this.exec(function(i){function r(e,i,r){n&&(r=!r),r?s.setClass(o,t):s.removeClass(o,t)}var o=this;void 0!==e?"string"==typeof e?((this._binds=this._binds||[]).push(i.subscribe(e,r)),r("set",null,i.get(e))):r("set",null,e):r("set",null,!0)},function(i,r){(void 0===e||(n?!i.get(e):i.get(e)))&&(r.classes+=" "+t)})},css:function(t,e){return"string"==typeof e&&(e=u(e)),this.exec(function(n){var i=e,r=this;e.__interpolable__&&(i=e.output(n),(this._binds=this._binds||[]).push(e.subscribeTo(n,function(e,n,i){r.style[t]=i}))),(this.style=this.style||{})[t]=i},function(n,i){i.style+=t+":"+(e.__interpolable__?e.output(n):e)})},visible:function(t){var e=!1;return"!"===t[0]&&(t=t.substring(1),e=!0),this.exec(function(n){var i=t,r=this,s=(this.style?this.style.display:"")||"";this.style||(this.style={}),"string"==typeof t&&(i=n.get(t),(this._binds=this._binds||[]).push(n.subscribe(t,function(t,n,i){e&&(i=!i),r.__yContainer__?i?r.show():r.hide():r.style.display=i?s:"none"}))),e&&(i=!i),r.__yContainer__?i?r.show():r.hide():this.style.display=i?s:"none"},function(n,i){var r="string"==typeof t?n.get(t):t;e&&(r=!r),r||(i.style+="display:none;")})},text:function(t){return"string"==typeof t&&(t=u(t)),this.exec(function(e,n){var i;t.__interpolable__?(i=n.createTextNode(t.output(e)),(this._binds=this._binds||[]).push(t.subscribeTo(e,function(t,e,n){i.__yVirtual__&&(i.nodeValue=n,i.el&&(i.el.nodeValue=n)),i.nodeValue=n}))):i=n.createTextNode(t),this.appendChild(i)},function(e,n){n.children+=t.__interpolable__?t.output(e):t})},tag:function(t){for(var e=[],i=1,r=arguments.length;r>i;++i)e.push(arguments[i].call?arguments[i]:p().text(arguments[i]));return this.exec(function(n,i){for(var r,s=i.createElement(t),o=[],u=0,l=e.length;l>u;++u)r=e[u].call(s,this.childrenContext||n,i),r&&r.then&&o.push(r);return this.appendChild(s),o.length?1===o.length?o[0]:Promise.all(o):void 0},function(i,r){var s="<"+t;this._id&&(s+=' id="'+this._id+'"');for(var o=new n,u=0,l=e.length;l>u;u++)e[u].toString&&e[u].toString(i,o);s+=o.attributes,o.style&&(s+=' style="'+o.style+'"'),o.classes&&(s+=' class="'+o.classes+'"'),o.children?r.children+=s+">"+o.children+"</"+t+">":r.children+=s+"/>"})},a:function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift("a",p().attr("href",t)),this.tag.apply(this,e)},input:function(t,e){var n=Array.prototype.slice.call(arguments,2),i=p().attr("type",t);return e&&i.val(e),n.unshift("input",i),this.tag.apply(this,n)},h:function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift("h"+t),this.tag.apply(this,e)},on:function(t,e){return this.exec(function(n){if(!o().isServer){var i;if("string"==typeof e){if(!n.data[e])throw s.produceError("on("+t+') : no "'+e+'" event handlers define in current context',this);i=n.data[e]}else i=e;this.addEventListener(t,function(t){return i.call(n,t)})}})},off:function(t,e){return this.exec(function(){this.removeEventListener(t,e)})},each:function(t,e){return this._hasEach=!0,this.exec(function(n,i){function r(t,e){var r=new c({data:t,parent:n}),s=new h;s.context=r,l.childNodes.push(s);var o=u.call(s,r,i);return o&&o.then&&e.push(o),s}var o=this,u=d(this,e),l=new h;l.childNodes=[],this.__yPureNode__?this.appendChild(l):(this._yamvish_containers=this._yamvish_containers||[]).push(l);var a=function(t,e,n,i){switch(e.forEach&&(e=e.join(".")),t){case"reset":case"set":for(var u,h=0,a=[],c=!o.__yPureNode__||o.mountPoint?s.findNextSibling(l):null,p=n.length;p>h;++h)if(l.childNodes[h])l.childNodes[h].context.reset(n[h]);else{var d=r(n[h],a);o.__yPureNode__&&!o.mountPoint||!d.childNodes||s.mountChildren(d,u||o.mountPoint||o,u?null:c)}if(h<l.childNodes.length){for(var f=h,_=l.childNodes.length;_>h;++h)s.destroyElement(l.childNodes[h],!0);l.childNodes.splice(f)}if(a.length)return Promise.all(a);break;case"removeAt":s.destroyElement(l.childNodes[i],!0),l.childNodes.splice(i,1);break;case"push":var c=s.findNextSibling(l),a=[],d=r(n,a);if(o.__yPureNode__&&!o.mountPoint||!d.childNodes||s.mountChildren(d,o.mountPoint||o,c),a.length)return a[0]}},p=t;return"string"==typeof t&&((this._binds=this._binds||[]).push(n.subscribe(t,a)),(this._binds=this._binds||[]).push(n.subscribe(t+".*",function(t,e,n,i){var r=l.childNodes[i];return r?r.context.reset(n):void 0})),p=n.get(t)),p?a("set",t,p):void 0},function(i,r){var s=d(this,e),o=new n,u="string"==typeof t?i.get(t):t;if(u)for(var l=0,h=u.length;h>l;++l)s.toString(new c({data:u[l],parent:i}),o);r.children+=o.children})},use:function(t){return this.exec(function(e,n){if("string"==typeof t){var i=o();t=i.templates[t]||i.views[t]}if(!t)throw new Error('no template/container found with "'+t+'"');return t.__yContainer__?t.mount(this,"append"):t.call(this,e,n)},function(e,n){if("string"==typeof t){var i=o();t=i.templates[t]||i.views[t]}if(!t)throw new Error('no template/container found with "'+t+'"');return t.toString(this,e,n)})}},["div","span","ul","li","button","p"].forEach(function(t){i.prototype[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),this.tag.apply(this,e)}}),["click","blur","focus"].forEach(function(t){i.prototype[t]=function(e){return this.on(t,e)}}),e.exports=i}()},{"./container":3,"./context":4,"./env":6,"./interpolable":8,"./parsers/dom-to-template":9,"./pure-node":11,"./utils":13,"./virtual":15}],13:[function(t,e,n){function i(t,e){var n=new Error(t);return n.report=e,n}function r(t,e){t.__yVirtual__?(t.el&&t.el.classList.add(e),(t.classes=t.classes||{})[e]=!0):t.classList.add(e)}function s(t,e){t.__yVirtual__?(t.el&&t.el.classList.remove(e),t.classes&&delete t.classes[e]):t.classList.remove(e)}function o(t,e){var n=0;"$this"===e[0]&&(n=1);for(var i=t,r=n,s=e.length;s>r;++r)if(!i||void 0===(i=i[e[r]]))return;return i}function u(t,e){var n=t,i=0;for(len=e.length-1;i<len;++i)if(n&&!(n=n[e[i]]))return;n&&delete n[e[i]]}function l(t,e,n){for(var i,r=t,s=0,o=e.length-1;o>s;++s)r=r&&!r[e[s]]?r[e[s]]={}:r[e[s]];return r&&(i=r[e[s]],r[e[s]]=n),i}function h(t){if(t.childNodes&&t.childNodes.length){for(var e=0,n=t.childNodes.length;n>e;++e)a(t.childNodes[e]);t.__yVirtual__?t.childNodes=[]:t.innerHTML=""}}function a(t,e){if(e&&t.parentNode&&(t.parentNode.removeChild(t),t.parentNode=null),t.__yPureNode__?(t.__yVirtual__&&(t.attributes=void 0,t.listeners=void 0,t.classes=void 0,t.style=void 0),t.childNodes&&t.childNodes.length&&c(t,e)):t.childNodes&&t.childNodes.length&&c(t),t._binds){for(var n=0,i=t._binds.length;i>n;n++)t._binds[n]();t._binds=null}t._yamvish_containers&&(t._yamvish_containers=null)}function c(t,e){if(t.childNodes)for(var n=0;n<t.childNodes.length;n++)a(t.childNodes[n],e)}function p(t,e){for(var n in t)e[n]=t[n]}function d(t,e,n){if(t.childNodes&&t.__yPureNode__)if(n)for(var i=t.childNodes.length-1;i>=0;--i){var r=t.childNodes[i];r.__yPureNode__&&!r.__yVirtual__?d(r,e,n):e.insertBefore(r,n)}else for(var s=0,o=t.childNodes.length;o>s;++s){var r=t.childNodes[s];r.__yPureNode__&&!r.__yVirtual__?d(r,e):e.appendChild(r)}}function f(t){for(var e=t;e&&!e.__yVirtual__&&e.__yPureNode__&&e.childNodes&&e.childNodes.length;)e=e.childNodes[e.childNodes.length-1];return!e||e.__yPureNode__&&!e.__yVirtual__?null:e.nextSibling}e.exports={mountChildren:d,mergeProto:p,destroyElement:a,destroyChildren:c,setProp:l,deleteProp:u,getProp:o,emptyNode:h,produceError:i,setClass:r,removeClass:s,findNextSibling:f,merge:function(t,e){var n={};for(var i in t)n[i]=t[i];for(var r in e)n[r]=e[r];return n},domQuery:function(t){return"#"===t[0]?document.getElementById(t.substring(1)):document.querySelector(t)}}},{}],14:[function(t,e,n){var i=t("./utils"),r=t("./env"),s=t("./template"),o=t("./virtual"),u=t("./container"),l=t("./context"),h=function(t){t=t||{},t.componentName&&addComponent(t.componentName,this),this.factory=t.factory,l.call(this,t),u.call(this,t)};i.mergeProto(s.prototype,h.prototype),i.mergeProto(u.prototype,h.prototype),i.mergeProto(l.prototype,h.prototype),h.prototype.exec=function(t){var e=t.call(this,this,this.factory||(r().isServer?o:document));return e&&e.then&&this.waiting(e),this},h.prototype.destroy=function(){u.prototype.destroy.call(this),l.prototype.destroy.call(this)},delete h.prototype["catch"],delete h.prototype.call,delete h.prototype.toElement,delete h.prototype.context,delete h.prototype.id,delete h.prototype.attr,delete h.prototype.setClass,delete h.prototype.visible,delete h.prototype.css,delete h.prototype.val,delete h.prototype.contentEditable,e.exports=h},{"./container":3,"./context":4,"./env":6,"./template":12,"./utils":13,"./virtual":15}],15:[function(t,e,n){function i(t){t=t||{},this.__yVirtual__=!0,t.tagName&&(this.tagName=t.tagName),t.nodeValue&&(this.nodeValue=t.nodeValue),o.call(this,t)}var r=t("./utils"),s=t("./emitter"),o=t("./pure-node"),u=t("./parsers/open-tags");i.prototype={setAttribute:function(t,e){(this.attributes=this.attributes||{})[t]=e},removeAttribute:function(t,e){this.attributes&&delete this.attributes[t]}},r.mergeProto(o.prototype,i.prototype),r.mergeProto(s.prototype,i.prototype),i.prototype.toString=function(){if("textnode"===this.tagName)return this.nodeValue;var t="<"+this.tagName;this.id&&(t+=' id="'+this.id+'"');for(var e in this.attributes)t+=" "+e+'="'+this.attributes[e]+'"';if(this.classes){var n=Object.keys(this.classes);n.length&&(t+=' class="'+n.join(" ")+'"')}if(this.childNodes&&this.childNodes.length){t+=">";for(var i=0,r=this.childNodes.length;r>i;++i)t+=this.childNodes[i].toString();t+="</"+this.tagName+">"}else t+=this.scriptContent?">"+this.scriptContent+"</script>":u.test(this.tagName)?">":" />";return t},i.createElement=function(t){return new i({tagName:t})},i.createTextNode=function(t){return new i({tagName:"textnode",nodeValue:t})},e.exports=i},{"./emitter":5,"./parsers/open-tags":10,"./pure-node":11,"./utils":13}]},{},[1])(1)});